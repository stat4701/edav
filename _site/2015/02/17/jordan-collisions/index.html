
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Jordan Collisions</title>
	<meta name="author" content="Michael Malecki">
	<link href='/assets/themes/the-minimum/css/style.css' rel="stylesheet" media="all">
	<link href="http://feeds.feedburner.com/" rel="alternate" title="Jordan Collisions" type="application/atom+xml">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script>
</head>
<body>

<div id="page" class="hentry">
	<header class="the-header">
		<div class="unit-head">
			<div class="unit-inner unit-head-inner">
				<p class="logo"><a href="/">EDAV</a></p>
				<nav class="nav-global">
					<ul>
						<li class="blog"><a href='archive.html'>blog &amp; slides</a></li>
						<li class="agenda"><a href='http://github.com/stat4701/edav/blob/gh-pages/agenda.md'>agenda</a></li>
						<li class="category"><a href='categories.html'>categories</a></li>
						<li class="tag"><a href='tags.html'>tags</a></li>
					</ul>
				</nav>
			</div><!-- unit-inner -->
		</div><!-- unit-head -->
	</header>
	<div class="body" role="main">
		<div class="unit-body">
			<div class="unit-inner unit-body-inner">
				<div class="entry-content">
					
<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title">Jordan Collisions</h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					<h1>NYC Collision Data Investigation</h1>

<p>In this analysis I look at data from the NYPD Collisions Data Set for 2014 and 2015 through February 10.</p>

<p>This code loads the necessary packages for the analysis</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggmap<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
data <span class="o">=</span> read.csv<span class="p">(</span><span class="s">&#39;NYPD_MOTOR_VEHICLE_COLLISIONS.csv&#39;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot;,&quot;</span><span class="p">)</span>
</code></pre></div>
<p>First I compared the string (latitude, longitude) column to the individual numeric columns:</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">split <span class="o">&lt;-</span> <span class="kp">substring</span><span class="p">(</span><span class="kp">as.character</span><span class="p">(</span>data<span class="o">$</span>LOCATION<span class="p">),</span><span class="m">2</span><span class="p">)</span>
split <span class="o">&lt;-</span> <span class="kp">substring</span><span class="p">(</span><span class="kp">split</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="kp">nchar</span><span class="p">(</span><span class="kp">split</span><span class="p">)</span><span class="m">-1</span><span class="p">)</span>
lat <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span><span class="kp">substr</span><span class="p">(</span><span class="kp">split</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="kp">regexpr</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="kp">split</span><span class="p">)</span><span class="m">-1</span><span class="p">))</span>
long <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span><span class="kp">substr</span><span class="p">(</span><span class="kp">split</span><span class="p">,</span><span class="kp">regexpr</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="kp">split</span><span class="p">)</span><span class="m">+1</span><span class="p">,</span> <span class="kp">nchar</span><span class="p">(</span><span class="kp">split</span><span class="p">)))</span>
<span class="kp">identical</span><span class="p">(</span>data<span class="o">$</span>LATITUDE<span class="p">,</span> lat<span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">identical</span><span class="p">(</span>data<span class="o">$</span>LONGITUDE<span class="p">,</span> long<span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE
</code></pre></div>
<p>Looks like both latitude and longitude values are the same in both columns. No errors here!</p>

<p>To start I plotted collisions by borough in the charts below:</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">nyc <span class="o">&lt;-</span> ggplot<span class="p">(</span>data<span class="p">,</span> aes<span class="p">(</span>LONGITUDE<span class="p">,</span> LATITUDE<span class="p">,</span> color <span class="o">=</span> BOROUGH<span class="p">))</span>
nyc <span class="o">+</span> geom_point<span class="p">(</span>alpha <span class="o">=</span> <span class="m">0.2</span><span class="p">,</span> size <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span> guides<span class="p">(</span>color <span class="o">=</span> guide_legend<span class="p">(</span>override.aes <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>alpha <span class="o">=</span> <span class="m">1</span><span class="p">,</span> size <span class="o">=</span> <span class="m">3</span><span class="p">)))</span>
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/jmrosen155/edav/gh-pages/_posts/nyc_collisions_files/figure-html/unnamed-chunk-3-1.png" alt=""> </p>
<div class="highlight"><pre><code class="language-r" data-lang="r">nycmap <span class="o">&lt;-</span> get_map<span class="p">(</span><span class="s">&quot;New York City&quot;</span><span class="p">,</span> zoom<span class="o">=</span><span class="m">11</span><span class="p">)</span>
nyc1 <span class="o">&lt;-</span> ggmap<span class="p">(</span>nycmap<span class="p">)</span>
nyc1 <span class="o">&lt;-</span> nyc1 <span class="o">+</span> geom_point<span class="p">(</span>data<span class="o">=</span>data<span class="p">,</span> aes<span class="p">(</span>LONGITUDE<span class="p">,</span> LATITUDE<span class="p">,</span> color <span class="o">=</span> BOROUGH<span class="p">),</span> alpha <span class="o">=</span> <span class="m">.2</span><span class="p">,</span> size <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
nyc1 <span class="o">&lt;-</span> nyc1 <span class="o">+</span> guides<span class="p">(</span>color <span class="o">=</span> guide_legend<span class="p">(</span>override.aes <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>alpha <span class="o">=</span> <span class="m">1</span><span class="p">,</span> size <span class="o">=</span> <span class="m">3</span><span class="p">)))</span>
nyc1
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/jmrosen155/edav/gh-pages/_posts/nyc_collisions_files/figure-html/unnamed-chunk-3-2.png" alt=""> </p>

<p>Now I have a look at fatal accidents broken down by who was killed (i.e. cyclist, motorist, or pedestrian)</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">killedped<span class="o">=</span><span class="kp">subset</span><span class="p">(</span>data<span class="p">,</span>NUMBER.OF.PEDESTRIANS.KILLED <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span>
killedcyc<span class="o">=</span><span class="kp">subset</span><span class="p">(</span>data<span class="p">,</span>NUMBER.OF.CYCLIST.KILLED <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span>
killedmot<span class="o">=</span><span class="kp">subset</span><span class="p">(</span>data<span class="p">,</span>NUMBER.OF.MOTORIST.KILLED <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span>
nycmap <span class="o">&lt;-</span> get_map<span class="p">(</span><span class="s">&quot;New York City&quot;</span><span class="p">,</span> zoom<span class="o">=</span><span class="m">11</span><span class="p">)</span>
nyc1 <span class="o">&lt;-</span> ggmap<span class="p">(</span>nycmap<span class="p">)</span>
nyc1 <span class="o">&lt;-</span> nyc1 <span class="o">+</span> scale_color_discrete<span class="p">(</span>name <span class="o">=</span> <span class="s">&quot;Fatal Accidents&quot;</span><span class="p">)</span> <span class="o">+</span>
  geom_point<span class="p">(</span>data<span class="o">=</span>killedped<span class="p">,</span> aes<span class="p">(</span>LONGITUDE<span class="p">,</span> LATITUDE<span class="p">,</span> color <span class="o">=</span> <span class="s">&#39;Pedestrians&#39;</span><span class="p">),</span> size<span class="o">=</span><span class="m">3</span><span class="p">)</span> <span class="o">+</span>
  geom_point<span class="p">(</span>data<span class="o">=</span>killedcyc<span class="p">,</span> aes<span class="p">(</span>LONGITUDE<span class="p">,</span> LATITUDE<span class="p">,</span> color <span class="o">=</span> <span class="s">&#39;Cyclists&#39;</span><span class="p">),</span> size<span class="o">=</span><span class="m">3</span><span class="p">)</span> <span class="o">+</span>
  geom_point<span class="p">(</span>data<span class="o">=</span>killedmot<span class="p">,</span> aes<span class="p">(</span>LONGITUDE<span class="p">,</span> LATITUDE<span class="p">,</span> color <span class="o">=</span> <span class="s">&#39;Motorists&#39;</span><span class="p">),</span> size<span class="o">=</span><span class="m">3</span><span class="p">)</span>
nyc1
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/jmrosen155/edav/gh-pages/_posts/nyc_collisions_files/figure-html/unnamed-chunk-4-1.png" alt=""> </p>

<p>Now I am going to look at accidents by time of day and borough</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">ggplot<span class="p">(</span>data<span class="p">,</span> aes<span class="p">(</span>x<span class="o">=</span><span class="kp">format</span><span class="p">(</span><span class="kp">as.POSIXct</span><span class="p">(</span><span class="kp">as.character</span><span class="p">(</span>data<span class="o">$</span>TIME<span class="p">),</span> format <span class="o">=</span> <span class="s">&quot;%H:%M&quot;</span><span class="p">),</span> <span class="s">&quot;%H:%M&quot;</span><span class="p">)))</span> <span class="o">+</span> 
  geom_density<span class="p">(</span>aes<span class="p">(</span>group<span class="o">=</span>BOROUGH<span class="p">,</span> colour<span class="o">=</span>BOROUGH<span class="p">,</span> fill<span class="o">=</span>BOROUGH<span class="p">),</span> alpha<span class="o">=</span><span class="m">0.2</span><span class="p">)</span> <span class="o">+</span>
  scale_x_discrete<span class="p">(</span>breaks<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;00:00&#39;</span><span class="p">,</span> <span class="s">&#39;04:00&#39;</span><span class="p">,</span><span class="s">&#39;08:00&#39;</span><span class="p">,</span><span class="s">&#39;12:00&#39;</span><span class="p">,</span><span class="s">&#39;16:00&#39;</span><span class="p">,</span><span class="s">&#39;20:00&#39;</span><span class="p">))</span> <span class="o">+</span>
  xlab<span class="p">(</span><span class="s">&#39;Time of day&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/jmrosen155/edav/gh-pages/_posts/nyc_collisions_files/figure-html/unnamed-chunk-5-1.png" alt=""> </p>

<p>Looks like most accidents happen between around 6am and 7pm. There are slightly fewer accidents in the middle of the day while people are at work. There is also somewhat of a peak around 1am when people may be returning home from bars.</p>

					<div class="meta">
						<p class="date-publish">
							Published: 
							<date class="date-pub" title="2015-02-17T00:00:00-05:00" datetime="2015-02-17T00:00:00-05:00" pubdate>
							<span class="month"><abbr>February</abbr></span>
							<span class="day">17</span>
							<span class="year">2015</span>
							</date>
						</p>
						<ul class="list-category list-linear">
							<li class="list-head">category: </li>
							
							


  
    
  


						</ul>
						<ul class="list-tag list-linear">
							<li class="list-head">tags: </li>
							
							


  
    
  



						</ul>
					</div><!-- meta -->
				</div><!-- entry-content -->
				<div class="misc-content">
					<div class="social">
						<ul class="list-linear">
							<li><div class="twitter-tweet"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="mike_malecki" data-lang="en">Tweet</a></div></li>
							<li><div class="twitter-follow"><a href="https://twitter.com/mike_malecki" class="twitter-follow-button" data-show-count="false" data-lang="en"></a></div></li>
						</ul>
					</div>
					
					
				</div><!-- misc-content -->
				
			</div><!-- bd -->
			<footer class="unit-foot">
				<div class="unit-inner unit-foot-inner">
					<nav class="pagination">
						<ul>
							
							<li class="prev"><a class="internal" rel="prev"  href="/2015/02/17/R_MiniAssigment_dvl2110_calendar_heatmap" title="View R_miniassigment_dvl2110_calendar_heatmap">&laquo; R_miniassigment_dvl2110_calendar_heatmap</a></li>
							
							
							<li class="pipe"> | </li>
							
							
							<li class="next"><a class="internal" rel="next"  href="/2015/02/17/nyc-crash-data" title="View Daniel M Sheehan - Mini Assignment - IPython notebook and CartoDB Crash Data">Daniel M Sheehan - Mini Assignment - IPython notebook and CartoDB Crash Data &raquo;</a></li>
							
						</ul>
					</nav>
					<p class="gotop">
						<a href="#page">Back to Top</a>
					</p>
				</div>
			</footer>

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>


				</div>
			</div><!-- unit-inner -->
		</div><!-- unit-body -->
	</div><!-- body -->
	<footer class="the-footer">
		<div class="unit-foot">
			<div class="unit-inner unit-foot-inner">
				<div class="misc vcard">
					<h4>about</h4>
					<ul>
						<li class="contact"><address><span class="author fn n">Michael Malecki</span> - <span class="fn email">malecki@gmail.com</span></address></li>
						<li class="github"><a href="http://github.com/malecki/" rel="me">github.com/malecki</a></li>
						<li class="twitter"><a href="http://twitter.com/mike_malecki/" rel="me">twitter.com/mike_malecki</a></li>
						<li class="rss"><a href="http://feeds.feedburner.com/">Subscribe to RSS Feed</a></li>
					</ul>
				</div><!-- misc -->
				<p class="licence">
					Theme: <a href="http://layouts-the.me">the_minimum</a> based on <a href="http://jekyllbootstrap.com/">Jekyll-bootstrap</a>.<br>
					Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>.
				</p>
			</div><!-- unit-foot-inner -->
		</div><!-- unit-foot -->
	</footer>
</div><!-- page -->
<script>
	(function(d, s) {
		var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.src = url; js.id = id;
		fjs.parentNode.insertBefore(js, fjs);
		};
	load('//platform.twitter.com/widgets.js', 'tweetjs');
	// load('https://apis.google.com/js/plusone.js', 'gplus1js'); // Checkout http://j.mp/ApDgMr for usage html for this is <div class="g-plusone" data-size="medium"></div>
	// load('//connect.facebook.net/en_US/all.js#xfbml=1', 'fbjssdk'); // Checkout http://j.mp/wZw2xR for using open graph protorol html for this is <div class="fb-like" data-href="/2015/02/17/jordan-collisions" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>
	}(document, 'script'));
</script>
<script>
/*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
(function(j){var i=j.document;if(!i.querySelectorAll){return}var l=i.querySelectorAll("meta[name=viewport]")[0],a=l&&l.getAttribute("content"),h=a+", maximum-scale=1.0",d=a+", maximum-scale=10.0",g=true,c=j.orientation,k=0;if(!l){return}function f(){l.setAttribute("content",d);g=true}function b(){l.setAttribute("content",h);g=false}function e(m){c=Math.abs(j.orientation);k=Math.abs(m.gamma);if(k>8&&c===0){if(g){b()}}else{if(!g){f()}}}j.addEventListener("orientationchange",f,false);j.addEventListener("deviceorientation",e,false)})(this);
</script>

  
</body>
</html>

